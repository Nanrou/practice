// This file is part of www.nand2tetris.org
// and the book "The Elements of Computing Systems"
// by Nisan and Schocken, MIT Press.
// File name: projects/01/Mux4Way16.hdl

/**
 * 4-way 16-bit multiplexor:
 * out = a if sel == 00
 *       b if sel == 01
 *       c if sel == 10
 *       d if sel == 11
 */

CHIP Mux4Way16 {
    IN a[16], b[16], c[16], d[16], sel[2];
    OUT out[16];

    PARTS:
    // Put your code here:
	Or(a=sel[0], b=sel[1], out=orsel);
	Not(in=orsel, out=notsel);
	
	Not(in=sel[0], out=notsel0);
	And(a=notsel0, b=sel[1], out=notsel10);
	
	Not(in=sel[1], out=notsel1);
	And(a=sel[0], b=notsel1, out=notsel01);
	
	And(a=sel[0], b=sel[1], out=andsel);

And(a=a[0], b=notsel, out=p10);
And(a=b[0], b=notsel01, out=p20);
And(a=c[0], b=notsel10, out=p30);
And(a=d[0], b=andsel, out=p40);
Or(a=p10, b=p20, out=o10);
Or(a=o10, b=p30, out=o20);
Or(a=o20, b=p40, out=out[0]);

And(a=a[1], b=notsel, out=p11);
And(a=b[1], b=notsel01, out=p21);
And(a=c[1], b=notsel10, out=p31);
And(a=d[1], b=andsel, out=p41);
Or(a=p11, b=p21, out=o11);
Or(a=o11, b=p31, out=o21);
Or(a=o21, b=p41, out=out[1]);

And(a=a[2], b=notsel, out=p12);
And(a=b[2], b=notsel01, out=p22);
And(a=c[2], b=notsel10, out=p32);
And(a=d[2], b=andsel, out=p42);
Or(a=p12, b=p22, out=o12);
Or(a=o12, b=p32, out=o22);
Or(a=o22, b=p42, out=out[2]);

And(a=a[3], b=notsel, out=p13);
And(a=b[3], b=notsel01, out=p23);
And(a=c[3], b=notsel10, out=p33);
And(a=d[3], b=andsel, out=p43);
Or(a=p13, b=p23, out=o13);
Or(a=o13, b=p33, out=o23);
Or(a=o23, b=p43, out=out[3]);

And(a=a[4], b=notsel, out=p14);
And(a=b[4], b=notsel01, out=p24);
And(a=c[4], b=notsel10, out=p34);
And(a=d[4], b=andsel, out=p44);
Or(a=p14, b=p24, out=o14);
Or(a=o14, b=p34, out=o24);
Or(a=o24, b=p44, out=out[4]);

And(a=a[5], b=notsel, out=p15);
And(a=b[5], b=notsel01, out=p25);
And(a=c[5], b=notsel10, out=p35);
And(a=d[5], b=andsel, out=p45);
Or(a=p15, b=p25, out=o15);
Or(a=o15, b=p35, out=o25);
Or(a=o25, b=p45, out=out[5]);

And(a=a[6], b=notsel, out=p16);
And(a=b[6], b=notsel01, out=p26);
And(a=c[6], b=notsel10, out=p36);
And(a=d[6], b=andsel, out=p46);
Or(a=p16, b=p26, out=o16);
Or(a=o16, b=p36, out=o26);
Or(a=o26, b=p46, out=out[6]);

And(a=a[7], b=notsel, out=p17);
And(a=b[7], b=notsel01, out=p27);
And(a=c[7], b=notsel10, out=p37);
And(a=d[7], b=andsel, out=p47);
Or(a=p17, b=p27, out=o17);
Or(a=o17, b=p37, out=o27);
Or(a=o27, b=p47, out=out[7]);

And(a=a[8], b=notsel, out=p18);
And(a=b[8], b=notsel01, out=p28);
And(a=c[8], b=notsel10, out=p38);
And(a=d[8], b=andsel, out=p48);
Or(a=p18, b=p28, out=o18);
Or(a=o18, b=p38, out=o28);
Or(a=o28, b=p48, out=out[8]);

And(a=a[9], b=notsel, out=p19);
And(a=b[9], b=notsel01, out=p29);
And(a=c[9], b=notsel10, out=p39);
And(a=d[9], b=andsel, out=p49);
Or(a=p19, b=p29, out=o19);
Or(a=o19, b=p39, out=o29);
Or(a=o29, b=p49, out=out[9]);

And(a=a[10], b=notsel, out=p110);
And(a=b[10], b=notsel01, out=p210);
And(a=c[10], b=notsel10, out=p310);
And(a=d[10], b=andsel, out=p410);
Or(a=p110, b=p210, out=o110);
Or(a=o110, b=p310, out=o210);
Or(a=o210, b=p410, out=out[10]);

And(a=a[11], b=notsel, out=p111);
And(a=b[11], b=notsel01, out=p211);
And(a=c[11], b=notsel10, out=p311);
And(a=d[11], b=andsel, out=p411);
Or(a=p111, b=p211, out=o111);
Or(a=o111, b=p311, out=o211);
Or(a=o211, b=p411, out=out[11]);

And(a=a[12], b=notsel, out=p112);
And(a=b[12], b=notsel01, out=p212);
And(a=c[12], b=notsel10, out=p312);
And(a=d[12], b=andsel, out=p412);
Or(a=p112, b=p212, out=o112);
Or(a=o112, b=p312, out=o212);
Or(a=o212, b=p412, out=out[12]);

And(a=a[13], b=notsel, out=p113);
And(a=b[13], b=notsel01, out=p213);
And(a=c[13], b=notsel10, out=p313);
And(a=d[13], b=andsel, out=p413);
Or(a=p113, b=p213, out=o113);
Or(a=o113, b=p313, out=o213);
Or(a=o213, b=p413, out=out[13]);

And(a=a[14], b=notsel, out=p114);
And(a=b[14], b=notsel01, out=p214);
And(a=c[14], b=notsel10, out=p314);
And(a=d[14], b=andsel, out=p414);
Or(a=p114, b=p214, out=o114);
Or(a=o114, b=p314, out=o214);
Or(a=o214, b=p414, out=out[14]);

And(a=a[15], b=notsel, out=p115);
And(a=b[15], b=notsel01, out=p215);
And(a=c[15], b=notsel10, out=p315);
And(a=d[15], b=andsel, out=p415);
Or(a=p115, b=p215, out=o115);
Or(a=o115, b=p315, out=o215);
Or(a=o215, b=p415, out=out[15]);
}